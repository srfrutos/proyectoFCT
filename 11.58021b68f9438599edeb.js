(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{FpTu:function(t,i,e){"use strict";e.r(i),e.d(i,"EditDecksModule",function(){return g});var r=e("ofXK"),c=e("tyNb"),a=e("mrSG"),o=e("3Pt+"),s=e("N/25"),n=e("fXoL"),d=e("CPIe"),b=e("Y/7H");let l=(()=>{class t{transform(t,i){const e=[];for(const r of t){if(""==i||i.length<3)return t;r.nombre.toLowerCase().indexOf(i.toLowerCase())>-1&&e.push(r)}return e}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275pipe=n.Mb({name:"filterEditDecks",type:t,pure:!0}),t})();function h(t,i){if(1&t&&(n.Tb(0,"td"),n.tc(1),n.Sb()),2&t){const t=i.$implicit;n.Db(1),n.uc(t)}}function u(t,i){if(1&t){const t=n.Ub();n.Tb(0,"tr"),n.rc(1,h,2,1,"td",5),n.Tb(2,"button",19),n.ac("click",function(){n.nc(t);const e=i.$implicit;return n.cc().removeFromDeck(e)}),n.tc(3,"x"),n.Sb(),n.Sb()}if(2&t){const t=i.$implicit;n.Db(1),n.ic("ngForOf",t)}}function m(t,i){if(1&t){const t=n.Ub();n.Tb(0,"div",20),n.Tb(1,"div",21),n.Tb(2,"a",22),n.ac("click",function(){n.nc(t);const e=i.$implicit;return n.cc().addToDeck(e.id,e.nombre)}),n.Ob(3,"img",23),n.Sb(),n.Sb(),n.Sb()}if(2&t){const t=i.$implicit;n.Db(3),n.jc("src",t.img,n.oc)}}const p=[{path:"",component:(()=>{class t{constructor(t,i,e,r,c){var a,o;this.router=t,this.cardsSvc=i,this.decksSvc=e,this.fb=r,this.authSvc=c,this.filterCard="",this.uid=this.authSvc.getUid(),this.cards$=this.cardsSvc.cards,this.cardList$=[],this.arraySaveDeck=[],this.cont=1,this.exist=!1,this.total=0,this.navigationExtras={state:{value:null}},this.contador=0,this.arrayRep=[];const s=this.router.getCurrentNavigation();this.deck=null===(o=null===(a=null==s?void 0:s.extras)||void 0===a?void 0:a.state)||void 0===o?void 0:o.value}initForm(){this.deckForm=this.fb.group({name:["",[o.o.required]]});let t=0;for(let i=0;i<=this.deck.cards.length;i++)this.deck.cards[i]==this.deck.cards[i+1]||(this.cardsSvc.getCard(this.deck.cards[i]).subscribe(t=>this.nameCard=t.nombre,t=>console.log(t)),this.cardList$[t]=[this.deck.cards[i],this.nameCard,this.deck.rep[t]],this.arraySaveDeck.push(this.deck.cards[i]),t++)}ngOnInit(){this.initForm()}addToDeck(t,i){for(let e in this.cardList$)this.cardList$[e].map(t=>t)[0]==parseInt(t)&&(this.cont=this.cardList$[e].map(t=>t)[2]+1,this.cardList$[e]=[t,i,this.cont],this.exist=!0,this.total++,this.cont=1,this.arraySaveDeck.push(t));0==this.exist&&(this.cardList$.push([t,i,this.cont]),this.total++,this.arraySaveDeck.push(t)),this.exist=!1}removeFromDeck(t){t[2]>1?(t[2]--,this.total--,this.arraySaveDeck.splice(t[1],1)):(this.cardList$.splice(t[1],1),this.arraySaveDeck.splice(t[1],1),this.total--)}saveDeck(){var t;return Object(a.b)(this,void 0,void 0,function*(){if(this.deckForm.valid){const i=this.deckForm.value,e=(null===(t=this.deck)||void 0===t?void 0:t.id)||null,r=this.arraySaveDeck.sort();console.log(r);for(let t=0;t<=r.length;t++)t<r.length&&(r[t]==r[t+1]?this.contador=this.contador+1:(console.log(this.contador),this.arrayRep.push(this.contador+1),this.contador=0));console.log(this.arrayRep),console.log(r),this.decksSvc.saveDecks(i,e,r,this.arrayRep,yield this.uid),this.arraySaveDeck=[],this.total=0,this.cardList$.splice(0),this.deckForm.reset(),alert("El mazo ha sido actualizado"),this.router.navigate(["decks"])}})}}return t.\u0275fac=function(i){return new(i||t)(n.Nb(c.a),n.Nb(d.a),n.Nb(b.a),n.Nb(o.b),n.Nb(s.a))},t.\u0275cmp=n.Hb({type:t,selectors:[["app-edit-decks"]],features:[n.Cb([s.a])],decls:36,vars:11,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-3","d-md-block","sidebar"],[1,"table","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],[1,"col-md-7","ml-sm-auto","col-lg-9","pt-3","px-4"],[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],[1,"form-inline","my-2","my-lg-0",3,"formGroup","ngSubmit"],["id","name","type","text","formControlName","name",1,"form-control","mr-sm-2",3,"placeholder"],["type","submit",1,"btn","btn-secondary","my-2","my-sm-0"],["type","button","data-toggle","collapse","data-target","#navbarColor03","aria-controls","navbarColor03","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarColor03",1,"collapse","navbar-collapse","ml-2"],[1,"form-inline","my-2","my-lg-0"],["type","text","placeholder","Search","name","filterCard",1,"form-control","mr-sm-2",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-secondary","my-2","my-sm-0"],[1,"row","cols-8","justify-content-center"],["class"," m-3",4,"ngFor","ngForOf"],[1,"btn","btn-light","mt-1","border-0",3,"click"],[1,"m-3"],[1,"container","p-0","mb-1"],[3,"click"],["width","220px","height","316px",3,"src"]],template:function(t,i){1&t&&(n.Tb(0,"div",0),n.Tb(1,"div",1),n.Tb(2,"nav",2),n.Tb(3,"table",3),n.Tb(4,"thead"),n.Tb(5,"tr"),n.Tb(6,"th",4),n.tc(7,"N\xba"),n.Sb(),n.Tb(8,"th",4),n.tc(9,"Name"),n.Sb(),n.Ob(10,"th",4),n.Sb(),n.Sb(),n.Tb(11,"tbody"),n.rc(12,u,4,1,"tr",5),n.Sb(),n.Tb(13,"tfoot"),n.Tb(14,"tr"),n.Tb(15,"td",4),n.tc(16,"Total"),n.Sb(),n.Tb(17,"td",4),n.tc(18),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Tb(19,"div",6),n.Tb(20,"nav",7),n.Tb(21,"form",8),n.ac("ngSubmit",function(){return i.saveDeck()}),n.Ob(22,"input",9),n.Tb(23,"button",10),n.tc(24,"Update"),n.Sb(),n.Sb(),n.Tb(25,"button",11),n.Ob(26,"span",12),n.Sb(),n.Tb(27,"div",13),n.Tb(28,"form",14),n.Tb(29,"input",15),n.ac("ngModelChange",function(t){return i.filterCard=t}),n.Sb(),n.Tb(30,"button",16),n.tc(31,"Search"),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Tb(32,"div",17),n.rc(33,m,4,1,"div",18),n.dc(34,"filterEditDecks"),n.dc(35,"async"),n.Sb(),n.Sb(),n.Sb(),n.Sb()),2&t&&(n.Db(12),n.ic("ngForOf",i.cardList$),n.Db(6),n.uc(i.total),n.Db(3),n.ic("formGroup",i.deckForm),n.Db(1),n.jc("placeholder",i.deck.name),n.Db(7),n.ic("ngModel",i.filterCard),n.Db(4),n.ic("ngForOf",n.fc(34,6,n.ec(35,9,i.cards$),i.filterCard)))},directives:[r.i,o.p,o.j,o.g,o.a,o.i,o.e,o.k,o.l],pipes:[l,r.b],styles:[""]}),t})()}];let f=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=n.Lb({type:t}),t.\u0275inj=n.Kb({imports:[[c.d.forChild(p)],c.d]}),t})();var v=e("+0xr");let g=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=n.Lb({type:t}),t.\u0275inj=n.Kb({imports:[[r.c,f,v.a,o.m,o.h],v.a]}),t})()}}]);